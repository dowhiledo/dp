<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<form id="form" action="#" method="post">
<div class="col-md-12">
    <h4>APTITUD DE ESPALDA</h4>
    <table class="table table-bordered tablaMuscEsc tablaMuscEsc1 ">
    <thead>
    <tr>
        <th class="col-md-1"></th>
        <th class="col-md-2">Excelente: 1</th>
        <th class="col-md-2">Promedio: 2</th>
        <th class="col-md-2">Regular: 3</th>
        <th class="col-md-2">Pobre: 4</th>
        <th class="col-md-1">Puntos</th>
        <th class="col-md-2">Observaciones</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="text-center">Flexibilidad Fuerza/ABDOMEN</td>
        <td class="text-center">
        <img src=../imagenes//cerdo.jpg class="imgMuscEsc fila1" width=160 height=160 data-puntos=1></td>
        <td><img src=../imagenes//tigre.jpg class="imgMuscEsc fila1" width=160 height=160 data-puntos=2></td>
        <td><img src=../imagenes//ojo.jpg class="imgMuscEsc fila1" width=160 height=160 data-puntos=3></td>
        <td><img src=../imagenes//ojo.jpg class="imgMuscEsc fila1" width=160 height=160 data-puntos=3></td>

        <td class="text-center"><input type="text" class="ptsFila ptsFilaTab1" name="ptsFlexFuerzaAb" readonly value=0></td>
        <td rowspan="3">
            <textarea name="observacionesTabla1" id="observacionesTab1" rows="16"></textarea>
        </td>
    </tr>
    <tr>
        <td>CADERA</td>
        <td><img src=../imagenes//cerdo1.jpg class="imgMuscEsc fila2" width=160 height=160 data-puntos=1></td>
        <td><img src=../imagenes//tigre1.jpg class="imgMuscEsc fila2" width=160 height=160 data-puntos=2></td>
        <td><img src=../imagenes//ojo1.jpg class="imgMuscEsc fila2" width=160 height=160 data-puntos=3></td>
        <td><img src=../imagenes//ojo1.jpg class="imgMuscEsc fila2" width=160 height=160 data-puntos=3></td>
        <td class="text-center"><input type="text" class="ptsFila ptsFilaTab1" name="ptsCadera" readonly value=0></td>
    </tr>
    <tr>
        <td colspan=5 class="text-right">
        TOTAL
        </td>
        <td colspan=1 class="text-center">
            <input type="text" id="ptsTotalTab1" class="resultTotalTab resultTotalTab2" name="ptsTotalTab1" readonly value=0>
        </td>
    </tr>

    </tbody>
</table>
</div>
 <!-------------------- TABLA 2 ------------------->
<div class="col-md-12">
<table class="table table-bordered tablaMuscEsc tablaMuscEsc2">
    <thead>
    <tr>
        <th class="col-md-3">RANGOS ARTICULARES</th>
        <th class="col-md-2">Óptimo:1</th>
        <th class="col-md-2">Limitado:2</th>
        <th class="col-md-2">Muy Limitado:3</th>

        <th class="col-md-1">Puntos.</th>
        <th class="col-md-2">Dolor contra resistencia**<br> Si / No </th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>Abducción de hombro (Normal 0° - 180°)</td>
        <td><img src=../imagenes//cerdo.jpg class="imgMuscEsc" width=160 height=160 data-puntos=1></td>
        <td><img src=../imagenes//tigre.jpg class="imgMuscEsc" width=160 height=160 data-puntos=2></td>
        <td><img src=../imagenes//ojo.jpg class="imgMuscEsc" width=160 height=160 data-puntos=3></td>

        <td class="text-center"><input type=text class="ptsFila ptsFilaTab2" name="abHombro180" value="0" readonly ></td>
        <td>
            <div class="btn-group" data-toggle="buttons">
                <label class="btn btn-default">
                    <input type="radio" name="rbtnf2" value="1" checked/> Si
                </label>
                <label class="btn btn-default">
                    <input type="radio" name="rbtnf2" value="0"/> No
                </label>
            </div>
        </td>
    </tr>
    <tr>
        <td>Abducción de hombro (Normal 0° - 60°)</td>
        <td><img src=../imagenes//cerdo1.jpg class="imgMuscEsc" width=160 height=160 data-puntos=1></td>
        <td><img src=../imagenes//tigre1.jpg class="imgMuscEsc" width=160 height=160 data-puntos=2></td>
        <td><img src=../imagenes//ojo1.jpg class="imgMuscEsc" width=160 height=160 data-puntos=3></td>
        <td class="text-center"><input type=text class="ptsFila ptsFilaTab2" name="abHombro60" value="0" readonly ></td>
        <td>
            <div class="btn-group" data-toggle="buttons">
                <label class="btn btn-default">
                    <input type="radio" name="rbtnf1" value="1"/> Si
                </label>
                <label class="btn btn-default">
                    <input type="radio" name="rbtnf1" value="0" checked/> No
                </label>
            </div>
        </td>
    </tr>
    <tr>
       <td colspan="3">OBSERVACIONES</td>
        <td class="text-right">
        TOTAL
        </td>
        <td colspan=1 class="text-center">
            <input type="text" id="ptsTotalTab2" class="resultTotalTab resultTotalTab2" name="ptsTotalTab2" readonly value="0">
        </td>
        <td>

        </td>
    </tr>
    <tr>
           <td colspan="6">
            <textarea name="observacionesTabla2" id="observacionesTab2" rows="3"></textarea>
            </td>
    </tr>
    </tbody>
</table>
<p class="">
 * En puntos colocar el grado que corresponde a la capacidad del paciente,<br>
** Repetir cada movimiento contra resistencia leve a moderada y evaluar fortaleza y presencia de dolor.
</p>
</div>

    <input type="button">


</form>
<button id="btnJSON">JSON</button>
<pre>
<div id="muestraJSON"></div>
</pre>
<!------------------------ script   ---------------------------------------->
<script src="../libs/jquery321.js"></script>
<script src="../libs/bootstrap-3.3.7-dist/js/bootstrap.min.js" crossorigin="anonymous"></script>
<script>
    $(document).ready(function () {


        var classImgSelected = "imgSelected";
        var classPtsFila = "ptsFila"; //puntos de c/fila para cualquier tabla
        var classResultTotalTab = "resultTotalTab";

        $("#btnJSON").click(function(){
            var formData = ($("#form").serializeArray());
//            formData.push({
//                name: 'nombrelabel',
//                value: 'valor'
//            });
            muestraJSON.innerHTML = JSON.stringify(formData);
            console.log(formData);
        });

        $(".imgMuscEsc").click(function () {

            var row = this.parentNode.parentNode;
            var tbody = row.parentNode;
            var resultLabelFila = row.getElementsByClassName(classPtsFila)[0];
            resultLabelFila.value = (this.dataset.puntos);

            $(resultLabelFila).animate({opacity: '0.2'}, "fast");
            $(resultLabelFila).animate({opacity: '1'}, "fast");

            // quita clase imgSelected a fila actual y
            // la agrega a imagen actual
            var listImagenesFila = row.getElementsByTagName("img");
            for (var i = 0; i < listImagenesFila.length; i++) {
                var obj = listImagenesFila[i];
                obj.classList.remove(classImgSelected);
            }
            this.classList.add(classImgSelected);

            // puntos totales de tabla actual
            var resultTotalTab = tbody.getElementsByClassName(classResultTotalTab)[0];
            $(resultTotalTab).animate({opacity: '0.2'}, "fast");
            $(resultTotalTab).animate({opacity: '1'}, "fast");
            var suma = calcularPuntos(tbody);
            resultTotalTab.value=suma;
        });

        var calcularPuntos = function (nodo) {
            console.log(nodo);
            var lista = nodo.getElementsByClassName(classPtsFila);
            var suma = 0;
            // suma los puntos de las filas de la tabla actual
            for (var i = 0; i < lista.length; i++) {
                var n = parseInt(lista[i].value,10);
                suma += n;
            }
            return suma;
        };






    });
</script>

<style>


    #hola{
        width: 90px;
        background-color: #40FF08;
        position: relative;
    }

    .imgMuscEsc {
        border: .4em solid #eae7ff;
        cursor: pointer;
    }

    .imgSelected {
        border: .4em solid #6191db;
    }

    .tablaMuscEsc td, .tablaMuscEsc thead th{
        /*background-color: aqua;*/
        text-align: center;
        vertical-align: middle !important;

    }

    .tablaMuscEsc tr td > input{
        text-align: center;
        background-color: transparent;
        border: 1px solid blue;
        max-width: 2em;
    }


    .tablaMuscEsc td textarea {
        margin:0;
        width: 100%;
    }





</style>


<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="../libs/bootstrap-3.3.7-dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">















</body>
</html>